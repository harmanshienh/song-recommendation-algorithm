(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7606:function(e,t,a){Promise.resolve().then(a.bind(a,6519))},6519:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return y}});var s=a(7437);a(8877);var n=a(2265),l=a(1109),r=a(6648);function i(e){let{suggestion:t,onClick:a}=e,[l,i]=(0,n.useState)([]),[o,c]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=async()=>{let e=await fetch("/api/list?query=".concat(t.artists));i(await e.json())};c(!0),e(),c(!1)},[t.artists]),(0,s.jsx)(s.Fragment,{children:!o&&(0,s.jsxs)("div",{onClick:()=>a(t),className:"flex flex-row bg-zinc-900 hover:bg-zinc-700  transition-colors hover:cursor-pointer w-full md:max-w-[600px] mx-auto rounded-lg",children:[(0,s.jsx)(r.default,{src:t.image,height:0,width:0,alt:t.name,unoptimized:!0,className:"h-14 w-auto rounded-lg p-2"}),(0,s.jsxs)("div",{className:"flex flex-col overflow-hidden p-1",children:[(0,s.jsx)("span",{className:"text-lg text-slate-200 truncate text-start",children:t.name}),(0,s.jsx)("span",{className:"text-sm text-slate-400 truncate text-start",children:l.join(", ")})]})]})})}var o=a(1444),c=a(6862);let x=(0,c.PH)("ADD_SONG"),u=(0,c.PH)("REMOVE_SONG");function d(){let[e,t]=(0,n.useState)(""),[a,r]=(0,n.useState)([]),c=(0,n.useRef)(null),u=(0,n.useRef)(null),d=(0,o.I0)();(0,n.useEffect)(()=>{(async()=>{let t=await fetch("/api/filter?query=".concat(e));r(await t.json())})()},[e]);let m=e=>{d(x(e)),c.current&&c.current.requestSubmit()};return(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("form",{ref:c,onClick:()=>{u.current&&u.current.focus()},onSubmit:e=>{e.preventDefault(),t("")},children:(0,s.jsxs)("div",{className:"group flex mx-auto items-center bg-slate-200  mt-20 rounded-full w-full sm:w-[600px] border-2  focus-within:border-green-500 focus-within:transition-colors",children:[(0,s.jsx)(l.QLp,{className:"text-6xl text-gray-500 px-3  group-focus-within:text-green-500  group-hover:text-green-500 transition-colors"}),(0,s.jsx)("input",{type:"text",ref:u,value:e,placeholder:"What songs do you love?",onChange:e=>t(e.target.value),className:"text-2xl bg-transparent w-full focus:outline-none font-semibold"})]})}),(0,s.jsx)("div",{className:"max-h-96 overflow-y-auto",children:e.length>0&&a.map((e,t)=>(0,s.jsx)(i,{suggestion:e,onClick:()=>m(e)},t))})]})}var m=a(4983);function h(e){let{song:t}=e,[a,l]=(0,n.useState)([]),[i,c]=(0,n.useState)(!1),x=(0,o.I0)();return(0,n.useEffect)(()=>{(async()=>{let e=await fetch("/api/list?query=".concat(t.artists));l(await e.json()),c(!0)})()},[t.artists]),(0,s.jsxs)("div",{className:"relative flex bg-zinc-900 hover:bg-zinc-700 \n              hover:cursor-pointer w-full sm:w-[384px]\n             mx-auto rounded-lg transition-all duration-300 ease-in-out ".concat(i?"opacity-100":"opacity-0"),children:[(0,s.jsx)(r.default,{src:t.image,height:0,width:0,alt:t.name,unoptimized:!0,className:"h-24 w-auto rounded-lg p-2"}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 p-2 pr-8",children:[(0,s.jsx)("span",{className:"text-lg font-semibold text-slate-200 truncate text-start max-w-28 sm:max-w-56",children:t.name}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("span",{className:"text-sm text-slate-400 truncate text-start max-w-28 sm:max-w-40",children:a.join(", ")}),(0,s.jsxs)("span",{className:"text-sm text-slate-400",children:["(",t.year,")"]})]})]}),(0,s.jsx)(m.bqj,{onClick:()=>{c(!1),setTimeout(()=>x(u(t.id)),300)},className:"absolute right-2 top-1/2 transform -translate-y-1/2  text-2xl text-red-500 hover:text-red-800 hover:text-3xl  hover:translate-x-[3px] transition-all"})]})}function f(){let e=(0,o.v9)(e=>e.songs);return(0,s.jsx)("div",{className:"mt-20 w-full",children:e.songs.map((e,t)=>(0,s.jsx)(h,{song:e},t))})}let g=(0,c.Lq)({songs:[]},e=>{e.addCase(x,(e,t)=>{e.songs.push(t.payload)}).addCase(u,(e,t)=>{e.songs=e.songs.filter(e=>e.id!==t.payload)})}),p=(0,c.xC)({reducer:{songs:g}});var j=a(7138);function w(e){let{recommendation:t}=e,[a,l]=(0,n.useState)([]),[i,o]=(0,n.useState)(""),[c,x]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{(async()=>{x(!1);let e=await fetch("/api/list?query=".concat(t.artists));l(await e.json()),x(!0)})()},[t.artists]),(0,n.useEffect)(()=>{(async()=>{let e=await fetch("/api/geturl?query=".concat(t.name));o((await e.json()).url)})()},[t.name]),(0,s.jsx)(j.default,{href:i,target:"_blank",children:(0,s.jsxs)("div",{className:"relative flex flex-row bg-zinc-900 hover:bg-zinc-700 \n              hover:cursor-pointer max-w-sm\n             mx-auto rounded-lg transition-all duration-300 ease-in-out ".concat(c?"opacity-100":"opacity-0"),children:[(0,s.jsx)(r.default,{src:t.image,height:0,width:0,alt:t.name,unoptimized:!0,className:"h-24 w-auto rounded-lg p-2"}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 overflow-hidden p-2",children:[(0,s.jsx)("span",{className:"text-lg text-slate-200 truncate text-start max-w-56 font-semibold",children:t.name}),(0,s.jsxs)("div",{className:"flex gap-1 max-w-56",children:[(0,s.jsx)("span",{className:"text-sm text-slate-400 truncate text-start",children:a.join(", ")}),(0,s.jsxs)("span",{className:"text-sm text-slate-400",children:["(",t.year,")"]})]})]})]})})}var v=a(7485),N={src:"/_next/static/media/logo.71e703a4.png",height:103,width:500,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAASElEQVR4nGP88+dPkeepQvYFulWPpHgk3t378NBUgU+Wj5GR8TADA4MM468/vxMizlZa92nkH5Hnk9EECt79////cyAtBMT8AKGLGM8rLBkGAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:2};let b=()=>{let e=(0,o.v9)(e=>e.songs),[t,a]=(0,n.useState)([]),[l,i]=(0,n.useState)(!1),c=async()=>{i(!0);let t=e.songs.map(e=>({name:e.name,year:e.year}));console.log(t);let s=await fetch("/api/recommend",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});a(await s.json()),i(!1)};return(0,n.useEffect)(()=>{0===e.songs.length&&a([]),i(!1)},[e.songs.length]),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("div",{className:"flex sm:justify-start",children:(0,s.jsx)(r.default,{src:N,height:0,width:0,alt:"Songifind",onClick:()=>window.location.reload(),unoptimized:!0,className:"cursor-pointer h-16 w-auto max-sm:mx-auto"})}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row w-full justify-center items-start  gap-4 min-h-[300px] px-2 sm:px-1 mx-auto transition-all  duration-300 ease-in-out",children:[(0,s.jsx)("div",{className:"transition-all duration-300 ease-in-out max-md:mx-auto\n                      ".concat(0===e.songs.length?"md:flex-grow md:flex md:justify-center":"flex-shrink-0"),children:(0,s.jsx)(d,{})}),(0,s.jsxs)("div",{className:"transition-all duration-300 ease-in-out max-md:mx-auto\n                      ".concat(e.songs.length>0?"opacity-100 max-w-[500px]":"opacity-0 max-w-0 overflow-hidden"),children:[(0,s.jsx)(f,{}),e.songs.length>0&&(0,s.jsx)("button",{onClick:c,className:"group border-2 rounded-full w-fit mt-5 mx-auto block\n                        hover:bg-slate-100 transition-all duration-300 \n                        ".concat(l?"cursor-default opacity-70 bg-slate-100 border-slate-100":"bg-green-500 border-green-500"),children:l?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("span",{className:"text-slate-100 text-opacity-70 text-2xl  font-bold p-8",children:"Submit"}),(0,s.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2  -translate-y-1/2",children:(0,s.jsx)(v.g4,{visible:!0,height:"40",width:"40",color:"#22c55e",ariaLabel:"three-dots-loading",wrapperStyle:{},wrapperClass:""})})]}):(0,s.jsx)("span",{className:"m-auto text-zinc-900 text-2xl font-semibold p-8  group-hover:text-green-500 transition-colors",children:"Submit"})})]})]}),t.length>0&&e.songs.length>0&&(0,s.jsxs)("div",{className:"mt-20 flex flex-col",children:[(0,s.jsx)("span",{className:"text-slate-200 text-3xl md:text-6xl font-bold  transition-opacity pb-3 md:p-5 mx-auto text-center",children:"Here are some songs you might like:"}),t.map(e=>(0,s.jsx)(w,{recommendation:e},e.id))]})]})};var y=function(){return(0,s.jsx)(o.zt,{store:p,children:(0,s.jsx)(b,{})})}},8877:function(){}},function(e){e.O(0,[404,821,516,571,489,971,23,744],function(){return e(e.s=7606)}),_N_E=e.O()}]);